
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Salon Chair app, which can be a public user requesting appointments or a salon owner managing their shop. User registration requires a verified Gmail account.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "The user's email address, primarily a Gmail account, used for registration and communication.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "The user's phone number, used for SMS and WhatsApp notifications related to bookings and alerts."
        },
        "name": {
          "type": "string",
          "description": "The display name of the user or salon owner."
        },
        "isSalonOwner": {
          "type": "boolean",
          "description": "Indicates whether this user account has salon owner privileges, allowing them to manage a salon."
        },
        "noShowFlagsCount": {
          "type": "number",
          "description": "A cumulative count of no-show flags received by this user from salon owners."
        },
        "isBanned": {
          "type": "boolean",
          "description": "A boolean flag indicating if the user is currently banned due to accumulating too many no-show flags."
        },
        "registrationDateTime": {
          "type": "string",
          "description": "The date and time when the user registered on the Salon Chair platform.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "email",
        "phoneNumber",
        "isSalonOwner",
        "noShowFlagsCount",
        "isBanned",
        "registrationDateTime"
      ]
    },
    "Salon": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Salon",
      "type": "object",
      "description": "Represents a salon listed on the Salon Chair platform, managed by a salon owner. Includes details for discovery and administration.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Salon entity."
        },
        "ownerId": {
          "type": "string",
          "description": "Reference to the User entity who owns and manages this salon. (Relationship: User 1:N Salon)"
        },
        "name": {
          "type": "string",
          "description": "The official business name of the salon."
        },
        "address": {
          "type": "string",
          "description": "The complete street address of the salon."
        },
        "landmark": {
          "type": "string",
          "description": "A prominent local landmark or recognizable point near the salon, crucial for local navigation."
        },
        "city": {
          "type": "string",
          "description": "The city where the salon is geographically located, used for filtering."
        },
        "state": {
          "type": "string",
          "description": "The state where the salon is geographically located, used for filtering."
        },
        "description": {
          "type": "string",
          "description": "An optional detailed description or profile of the salon, highlighting its offerings or ambiance."
        },
        "registrationDateTime": {
          "type": "string",
          "description": "The date and time when the salon formally registered on the platform.",
          "format": "date-time"
        },
        "verificationStatus": {
          "type": "string",
          "description": "The current verification status of the salon by an administrator (e.g., Pending, Approved, Rejected).",
          "format": "enum",
          "items": {
            "type": "string"
          }
        },
        "isVisible": {
          "type": "boolean",
          "description": "A boolean flag indicating if the salon is publicly visible and available for bookings, controlled by subscription status and admin overrides."
        },
        "subscriptionId": {
          "type": "string",
          "description": "Reference to the active Subscription entity for this salon. (Relationship: Salon 1:1 Subscription)"
        }
      },
      "required": [
        "id",
        "ownerId",
        "name",
        "address",
        "landmark",
        "city",
        "state",
        "registrationDateTime",
        "verificationStatus",
        "isVisible",
        "subscriptionId"
      ]
    },
    "Service": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Service",
      "type": "object",
      "description": "Represents a specific service offered by a salon, detailing its name, description, price, and estimated duration.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Service entity."
        },
        "salonId": {
          "type": "string",
          "description": "Reference to the Salon entity that offers this service. (Relationship: Salon 1:N Service)"
        },
        "name": {
          "type": "string",
          "description": "The name of the service (e.g., 'Haircut', 'Shaving', 'Facial')."
        },
        "description": {
          "type": "string",
          "description": "A brief description explaining what the service entails."
        },
        "price": {
          "type": "number",
          "description": "The monetary price of the service."
        },
        "durationMinutes": {
          "type": "number",
          "description": "The estimated time required to complete the service, in minutes."
        }
      },
      "required": [
        "id",
        "salonId",
        "name",
        "description",
        "price",
        "durationMinutes"
      ]
    },
    "Booking": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Booking",
      "type": "object",
      "description": "Represents an appointment request made by a public user for one or more services at a salon, including its status and response details.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Booking entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User entity (public user) who initiated the booking request."
        },
        "userName": {
          "type": "string",
          "description": "Denormalized name of the user for display."
        },
        "userPhone": {
          "type": "string",
          "description": "Denormalized phone number of the user for contact."
        },
        "salonId": {
          "type": "string",
          "description": "Reference to the Salon entity where the booking is requested."
        },
        "salonName": {
          "type": "string",
          "description": "Denormalized name of the salon for display."
        },
        "salonOwnerId": {
          "type": "string",
          "description": "Denormalized owner ID of the salon for authorization and querying."
        },
        "serviceIds": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Array of service identifiers."
        },
        "serviceName": {
          "type": "string",
          "description": "Denormalized primary service name for quick display."
        },
        "requestedSlotDateTime": {
          "type": "string",
          "description": "The specific date and time slot requested.",
          "format": "date-time"
        },
        "requestInitiatedDateTime": {
          "type": "string",
          "description": "The date and time when the booking request was placed.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Current status (Pending, Accepted, Rejected, etc.)."
        },
        "ownerResponseDateTime": {
          "type": "string",
          "format": "date-time"
        },
        "createdAt": {
          "type": "object",
          "description": "Firestore server timestamp."
        }
      },
      "required": [
        "id",
        "userId",
        "userName",
        "salonId",
        "salonName",
        "salonOwnerId",
        "requestedSlotDateTime",
        "status"
      ]
    },
    "Subscription": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Subscription",
      "type": "object",
      "description": "Manages the monthly subscription status and billing cycle details for a Salon, determining its visibility.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Subscription entity."
        },
        "salonId": {
          "type": "string",
          "description": "Reference to the Salon entity associated with this subscription. (Relationship: Salon 1:1 Subscription)"
        },
        "startDate": {
          "type": "string",
          "description": "The date and time when the current subscription period began.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "The anticipated end date and time of the current billing cycle. Null if active and ongoing without a fixed end.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The current operational status of the subscription (e.g., Active, Hidden, Trial, Cancelled). 'Hidden' implies non-payment.",
          "format": "enum",
          "items": {
            "type": "string"
          }
        },
        "lastPaymentDateTime": {
          "type": "string",
          "description": "The date and time of the most recent successful payment for this subscription.",
          "format": "date-time"
        },
        "nextPaymentDueDate": {
          "type": "string",
          "description": "The date and time when the next subscription payment is expected.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "salonId",
        "startDate",
        "status",
        "nextPaymentDueDate"
      ]
    },
    "Payment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Payment",
      "type": "object",
      "description": "Records individual payment transactions made by a salon owner for their subscription, including amount, date, and transaction status.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Payment entity."
        },
        "subscriptionId": {
          "type": "string",
          "description": "Reference to the Subscription entity this payment is associated with. (Relationship: Subscription 1:N Payment)"
        },
        "amount": {
          "type": "number",
          "description": "The monetary amount of the payment."
        },
        "paymentDateTime": {
          "type": "string",
          "description": "The date and time when the payment was successfully processed.",
          "format": "date-time"
        },
        "transactionId": {
          "type": "string",
          "description": "The unique transaction identifier provided by the payment gateway."
        },
        "status": {
          "type": "string",
          "description": "The status of the payment transaction (e.g., Success, Failed, Pending).",
          "format": "enum",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "subscriptionId",
        "amount",
        "paymentDateTime",
        "transactionId",
        "status"
      ]
    },
    "NoShowFlag": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "NoShowFlag",
      "type": "object",
      "description": "Records an instance where a public user failed to show up for a confirmed booking, as reported by a salon owner.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the NoShowFlag entity."
        },
        "bookingId": {
          "type": "string",
          "description": "Reference to the Booking entity that was a no-show. (Relationship: Booking 1:1 NoShowFlag)"
        },
        "flaggedBySalonOwnerId": {
          "type": "string",
          "description": "Reference to the User entity (salon owner) who flagged the no-show. (Relationship: User 1:N NoShowFlag)"
        },
        "flaggedUserId": {
          "type": "string",
          "description": "Reference to the User entity (public user) who failed to show up for the appointment. (Relationship: User 1:N NoShowFlag)"
        },
        "flagDateTime": {
          "type": "string",
          "description": "The date and time when the no-show was officially flagged by the salon owner.",
          "format": "date-time"
        },
        "reason": {
          "type": "string",
          "description": "An optional reason or comment provided by the salon owner for flagging the no-show."
        }
      },
      "required": [
        "id",
        "bookingId",
        "flaggedBySalonOwnerId",
        "flaggedUserId",
        "flagDateTime"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "User profiles.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/salons/{salonId}",
        "definition": {
          "entityName": "Salon",
          "schema": {
            "$ref": "#/backend/entities/Salon"
          },
          "description": "Top-level collection for all salons.",
          "params": [
            {
              "name": "salonId",
              "description": "The unique identifier for a salon."
            }
          ]
        }
      },
      {
        "path": "/bookings/{bookingId}",
        "definition": {
          "entityName": "Booking",
          "schema": {
            "$ref": "#/backend/entities/Booking"
          },
          "description": "All booking requests.",
          "params": [
            {
              "name": "bookingId",
              "description": "The unique identifier for a booking."
            }
          ]
        }
      }
    ]
  }
}
